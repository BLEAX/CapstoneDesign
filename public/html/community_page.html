<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/globals.css" />
    <link rel="stylesheet" href="../css/community_page.css" />
  </head>
  <body>
    <div class="community-page">
      <div class="div">
        <header class="header">
          <div class="header-group">
            <menu class="button-wrap">
              <a href="/" class="button"><u>HOME</u></a>
              <a href="test_select" class="button"><u>TEST</u></a>
              <a href="result" class="button"><u>RESULT</u></a>
              <a href="community" class="button"><u>COMMUNITY</u></a>
              <a href="others" class="button"><u>OTHERS</u></a>
            </menu>
          </div>
        </header>
        <div class="div-2">
          <div class="text-wrapper-2">COMMUNITY PAGE</div>
        </div>
        <!--글 목록-->
        <h1>Community Posts</h1>
        <ul id="postList"></ul>
        <a href="/write"><button class="write-button">create</button></a>
        <footer class="footer">
          <div class="overlap-group">
            <img class="line" src="../assets/line-1.svg" />
            <p class="email">
              Email : rlawjdgns135@naver.com<br />Tel : 010-5141-9809
            </p>
            <div class="text-wrapper">CONTACT US</div>
          </div>
        </footer>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("/posts")
          .then((response) => response.json())
          .then((posts) => {
            const postList = document.getElementById("postList");
            posts.forEach((post) => {
              const listItem = document.createElement("li");
              const link = document.createElement("a");
              link.textContent = post.title;
              link.href = `/post/${post.id}`; // 예를 들어, 각 글은 고유한 id를 가지고 있다고 가정합니다.
              listItem.appendChild(link);
              postList.appendChild(listItem);
            });
          })
          .catch((error) => console.error("Error fetching posts:", error));
      });
    </script>
  </body>
</html>
